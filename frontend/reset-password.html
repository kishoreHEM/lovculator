<!DOCTYPE html>
<html lang="en">
<head>
    <title>Reset Password - Lovculator</title>
    </head>
<body>
    <div class="auth-container">
        <h2>✨ Set New Password</h2>
        <p>Please enter your new password below.</p>

        <form id="reset-password-form" method="POST">
            <input type="hidden" id="reset-token" name="token" value="" />

            <div class="form-group">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" name="newPassword" required minlength="6" />
            </div>

            <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <input type="password" id="confirm-password" required />
            </div>

            <p id="error-message" style="color: red; margin-bottom: 15px;"></p>

            <button type="submit" class="btn-submit">Reset Password</button>
        </form>
    </div>
    <script src="/js/auth.js"></script>
    <script>
        // Immediately grab the token from the URL and put it in the hidden field
        const params = new URLSearchParams(window.location.search);
        const token = params.get('token');
        if (token) {
            document.getElementById('reset-token').value = token;
        } else {
            // Show error if token is missing (user navigated directly)
            document.querySelector('.auth-container h2').textContent = "⚠️ Invalid Link";
            document.querySelector('.auth-container p').textContent = "The password reset link is invalid or missing a token.";
            document.getElementById('reset-password-form').style.display = 'none';
        }
    </script>
</body>
</html>