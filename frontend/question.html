<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Dynamic-friendly title (JS can replace later) -->
  <title>Relationship Question & Answers ‚Ä¢ Lovculator</title>

  <!-- Description -->
  <meta name="description" content="Read relationship questions and answers on Lovculator. Get real advice on love, dating, friendship and emotional connections.">

  <!-- Theme -->
  <meta name="theme-color" content="#ff4b8d">

  <!-- Canonical (IMPORTANT) -->
  <link rel="canonical" href="https://lovculator.com/question">

  <!-- Open Graph -->
  <meta property="og:title" content="Relationship Question & Answers ‚Ä¢ Lovculator">
  <meta property="og:description" content="Real relationship questions answered by the Lovculator community. Love, dating, friendship & emotional advice.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://lovculator.com/question">
  <meta property="og:image" content="https://lovculator.com/images/og-cover.jpg">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Relationship Question & Answers ‚Ä¢ Lovculator">
  <meta name="twitter:description" content="Read and answer real relationship questions from the Lovculator community.">
  <meta name="twitter:image" content="https://lovculator.com/images/og-cover.jpg">

  <!-- Favicons -->
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" href="/images/favicon.ico" sizes="any">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/qa.css">

  <!-- Schema: QAPage (STATIC SAFE VERSION) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "QAPage",
    "mainEntity": {
      "@type": "Question",
      "name": "Relationship Question",
      "text": "User-submitted relationship question on Lovculator.",
      "answerCount": 0,
      "author": {
        "@type": "Person",
        "name": "Lovculator User"
      }
    }
  }
  </script>
</head>


<body class="app-layout question-page">
  <div id="global-header"></div>

  <!-- üîê Global Login Modal (MUST BE HERE) -->
  <div id="loginGateOverlay" class="login-gate-overlay hidden" aria-hidden="true">
    <div class="login-gate-modal" role="dialog" aria-modal="true">

      <button class="login-gate-close" aria-label="Close login modal">&times;</button>

      <div class="login-gate-header">
        <h2 id="loginGateTitle">Join Lovculator</h2>
        <p id="loginGateSubtitle">Create a free account to continue</p>
      </div>

      <ul class="login-gate-benefits">
        <li>‚ù§Ô∏è Like & save answers</li>
        <li>üí¨ Comment & share your thoughts</li>
        <li>üë• Follow people & stories</li>
      </ul>

      <div class="login-gate-actions">
        <a href="/signup" class="btn-primary">Create free account</a>
        <button id="openLoginPageBtn" class="btn-secondary">
          Already have an account?
        </button>
      </div>

      <div class="login-gate-footer">
        <span>No spam. No ads. Just real conversations.</span>
      </div>

    </div>
  </div>

  <!-- Main Layout -->
  <div class="app-container">
    <main class="main-content-area">

      <!-- Question Section -->
      <section class="question-section">
        <div id="questionContainer">
          <div class="loading-question">
            <div class="loading-spinner"></div>
            <p>Loading question...</p>
          </div>
        </div>
      </section>

      <!-- Answers Section -->
      <section class="answers-section">
        <h3>Answers</h3>
        <div id="answersContainer">
          <div class="loading-answers">
            <div class="loading-spinner"></div>
            <p>Loading answers...</p>
          </div>
        </div>
      </section>

      <!-- Answer Form Section -->
      <section id="answerFormContainer"></section>

    </main>
  </div>

  <!-- Scripts -->
  <script src="/js/global-header.js"></script>
  <script src="/js/search.js" defer></script>
  <script src="/js/layout-manager.js"></script>
  <script src="/js/global-login-gate.js" defer></script>
  <script src="/js/social-features.js"></script>
  <script src="/js/question.js"></script>

  <!-- Page Init -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      console.log('Question page loaded');

      // ----------------------------
      // Nav active state
      // ----------------------------
      const navItems = document.querySelectorAll('.nav-icon-item, .sidebar-item');
      navItems.forEach(item => {
        item.classList.remove('active');
        if (
          item.getAttribute('href') === '/answer' ||
          item.textContent.includes('Answers')
        ) {
          item.classList.add('active');
        }
      });

      // ----------------------------
      // Load user info (if exists)
      // ----------------------------
      if (typeof window.loadUserInfo === 'function') {
        window.loadUserInfo();
      }

      // ----------------------------
      // Load question
      // ----------------------------
      setTimeout(() => {
        if (typeof window.loadQuestion === 'function') {
          window.loadQuestion();
        } else {
          console.error('loadQuestion function not found in question.js');
          const qc = document.getElementById('questionContainer');
          if (qc) {
            qc.innerHTML =
              '<p style="color:red; text-align:center;">Failed to load question. Please refresh the page.</p>';
          }
        }
      }, 500);

      // ==================================================
      // üîê LOGIN GATE ‚Üí REMEMBER RETURN PAGE
      // ==================================================
      const openLoginBtn = document.getElementById('openLoginPageBtn');

      if (openLoginBtn) {
        openLoginBtn.addEventListener('click', function () {
          // Remember where user came from
          sessionStorage.setItem('loginReturnUrl', window.location.href);

          // Go to login page
          window.location.href = '/login';
        });
      }
    });
  </script>

</body>
</html>
